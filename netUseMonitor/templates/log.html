<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>日志</title>
    <script src="https://bitcoinrobot.cn/file/assets/bootstrap.4.1.3/js/jquery.slim.min.js"></script>
</head>
<body>
{% include "nav.html" %}
<div id="log-container" style="overflow-y:scroll;margin: 0 auto;text-align: left;">
    <div>
    </div>
</div>
</body>
<style>
    @media screen and (min-width: 800px) {
        #log-container {
            width: 800px
        }
    }

    @media screen and (max-width: 799px) {
        #log-container {
            width: 100%
        }
    }
</style>
<script>
    $(document).ready(function () {
        // 指定websocket路径
        var websocket = new WebSocket("wss://socket.bitcoinrobot.cn/1");
        websocket.onmessage = function (event) {
            // 接收服务端的实时日志并添加到HTML页面中
            $("#log-container div").prepend(`<p>${event.data}</p>`);
            // 滚动条滚动到最低部
            $("#log-container").scrollTop($("#log-container div").height() - $("#log-container").height());
        };
        websocket.onopen = function (event) {
        };
        websocket.onclose = function (event) {
            alert("连接已关闭！")
        };
    });
</script>
</body>
</html>
